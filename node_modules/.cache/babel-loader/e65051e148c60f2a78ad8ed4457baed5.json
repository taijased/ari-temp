{"remainingRequest":"/Users/taijased/Documents/WEB/ARQ/ari-temp/node_modules/babel-loader/lib/index.js!/Users/taijased/Documents/WEB/ARQ/ari-temp/src/service/heart.js","dependencies":[{"path":"/Users/taijased/Documents/WEB/ARQ/ari-temp/src/service/heart.js","mtime":1553690150418},{"path":"/Users/taijased/Documents/WEB/ARQ/ari-temp/node_modules/cache-loader/dist/cjs.js","mtime":1549106391509},{"path":"/Users/taijased/Documents/WEB/ARQ/ari-temp/node_modules/babel-loader/lib/index.js","mtime":1547794143554}],"contextDependencies":[],"result":["import _Date$now from \"/Users/taijased/Documents/WEB/ARQ/ari-temp/node_modules/@babel/runtime-corejs2/core-js/date/now\";\nvar Heart = {\n  runHeart: function runHeart(id_canvas) {\n    window.requestAnimationFrame = window.__requestAnimationFrame || window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function () {\n      return function (callback, element) {\n        var lastTime = element.__lastTime;\n\n        if (lastTime === undefined) {\n          lastTime = 0;\n        }\n\n        var currTime = _Date$now();\n\n        var timeToCall = Math.max(1, 33 - (currTime - lastTime));\n        window.setTimeout(callback, timeToCall);\n        element.__lastTime = currTime + timeToCall;\n      };\n    }();\n\n    window.isDevice = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test((navigator.userAgent || navigator.vendor || window.opera).toLowerCase());\n    var loaded = false;\n\n    var init = function init() {\n      if (loaded) return;\n      loaded = true;\n      var mobile = window.isDevice; // хотфикс ебать\n\n      var koef = mobile ? 0.95 : 1;\n      var canvas = document.getElementById(id_canvas);\n      var ctx = canvas.getContext('2d');\n      var width = canvas.width = koef * innerWidth;\n      var height = canvas.height = koef * innerHeight;\n      var rand = Math.random;\n      ctx.fillStyle = \"rgba(0,0,0,1)\";\n      ctx.fillRect(0, 0, width, height);\n      console.log(width + \" - \" + height);\n\n      var heartPosition = function heartPosition(rad) {\n        // return [Math.sin(rad), Math.cos(rad)];\n        return [Math.pow(Math.sin(rad), 3), -(15 * Math.cos(rad) - 5 * Math.cos(2 * rad) - 2 * Math.cos(3 * rad) - Math.cos(4 * rad))];\n      };\n\n      var scaleAndTranslate = function scaleAndTranslate(pos, sx, sy, dx, dy) {\n        return [dx + pos[0] * sx, dy + pos[1] * sy];\n      };\n\n      window.addEventListener('resize', function () {\n        width = canvas.width = koef * innerWidth;\n        height = canvas.height = koef * innerHeight;\n        ctx.fillStyle = \"rgba(0,0,0,1)\";\n        ctx.fillRect(0, 0, width, height);\n      });\n      var traceCount = mobile ? 20 : 50;\n      var pointsOrigin = [];\n      var i;\n      var dr = mobile ? 0.3 : 0.1;\n\n      for (i = 0; i < Math.PI * 2; i += dr) {\n        pointsOrigin.push(scaleAndTranslate(heartPosition(i), 210, 13, 0, 0));\n      }\n\n      for (i = 0; i < Math.PI * 2; i += dr) {\n        pointsOrigin.push(scaleAndTranslate(heartPosition(i), 150, 9, 0, 0));\n      }\n\n      for (i = 0; i < Math.PI * 2; i += dr) {\n        pointsOrigin.push(scaleAndTranslate(heartPosition(i), 90, 5, 0, 0));\n      }\n\n      var heartPointsCount = pointsOrigin.length;\n      var targetPoints = [];\n\n      var pulse = function pulse(kx, ky) {\n        for (i = 0; i < pointsOrigin.length; i++) {\n          targetPoints[i] = [];\n          targetPoints[i][0] = kx * pointsOrigin[i][0] + width / 2;\n          targetPoints[i][1] = ky * pointsOrigin[i][1] + height / 2;\n        }\n      };\n\n      var e = [];\n\n      for (i = 0; i < heartPointsCount; i++) {\n        var x = rand() * width;\n        var y = rand() * height;\n        e[i] = {\n          vx: 0,\n          vy: 0,\n          R: 2,\n          speed: rand() + 5,\n          q: ~~(rand() * heartPointsCount),\n          D: 2 * (i % 2) - 1,\n          force: 0.2 * rand() + 0.7,\n          f: \"hsla(0,\" + ~~(40 * rand() + 60) + \"%,\" + ~~(60 * rand() + 20) + \"%,.3)\",\n          trace: []\n        };\n\n        for (var k = 0; k < traceCount; k++) {\n          e[i].trace[k] = {\n            x: x,\n            y: y\n          };\n        }\n      }\n\n      var config = {\n        traceK: 0.4,\n        timeDelta: 0.01\n      };\n      var time = 0;\n\n      var loop = function loop() {\n        var n = -Math.cos(time);\n        pulse((1 + n) * .5, (1 + n) * .5);\n        time += (Math.sin(time) < 0 ? 9 : n > 0.8 ? .2 : 1) * config.timeDelta;\n        ctx.fillStyle = \"rgba(0,0,0,.1)\";\n        ctx.fillRect(0, 0, width, height);\n\n        for (i = e.length; i--;) {\n          var u = e[i];\n          var q = targetPoints[u.q];\n          var dx = u.trace[0].x - q[0];\n          var dy = u.trace[0].y - q[1];\n          var length = Math.sqrt(dx * dx + dy * dy);\n\n          if (10 > length) {\n            if (0.95 < rand()) {\n              u.q = ~~(rand() * heartPointsCount);\n            } else {\n              if (0.99 < rand()) {\n                u.D *= -1;\n              }\n\n              u.q += u.D;\n              u.q %= heartPointsCount;\n\n              if (0 > u.q) {\n                u.q += heartPointsCount;\n              }\n            }\n          }\n\n          u.vx += -dx / length * u.speed;\n          u.vy += -dy / length * u.speed;\n          u.trace[0].x += u.vx;\n          u.trace[0].y += u.vy;\n          u.vx *= u.force;\n          u.vy *= u.force;\n\n          for (k = 0; k < u.trace.length - 1;) {\n            var T = u.trace[k];\n            var N = u.trace[++k];\n            N.x -= config.traceK * (N.x - T.x);\n            N.y -= config.traceK * (N.y - T.y);\n          }\n\n          ctx.fillStyle = u.f;\n\n          for (k = 0; k < u.trace.length; k++) {\n            ctx.fillRect(u.trace[k].x, u.trace[k].y, 1, 1);\n          }\n        } // ctx.fillStyle = \"rgba(255,255,255,1)\";\n        // for (i = u.trace.length; i--;) ctx.fillRect(targetPoints[i][0], targetPoints[i][1], 2, 2);\n\n\n        window.requestAnimationFrame(loop, canvas);\n      };\n\n      loop();\n    };\n\n    var s = document.readyState;\n    if (s === 'complete' || s === 'loaded' || s === 'interactive') init();else document.addEventListener('DOMContentLoaded', init, false);\n  }\n};\nexport default Heart;",{"version":3,"sources":["/Users/taijased/Documents/WEB/ARQ/ari-temp/src/service/heart.js"],"names":["Heart","runHeart","id_canvas","window","requestAnimationFrame","__requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element","lastTime","__lastTime","undefined","currTime","timeToCall","Math","max","setTimeout","isDevice","test","navigator","userAgent","vendor","opera","toLowerCase","loaded","init","mobile","koef","canvas","document","getElementById","ctx","getContext","width","innerWidth","height","innerHeight","rand","random","fillStyle","fillRect","console","log","heartPosition","rad","pow","sin","cos","scaleAndTranslate","pos","sx","sy","dx","dy","addEventListener","traceCount","pointsOrigin","i","dr","PI","push","heartPointsCount","length","targetPoints","pulse","kx","ky","e","x","y","vx","vy","R","speed","q","D","force","f","trace","k","config","traceK","timeDelta","time","loop","n","u","sqrt","T","N","s","readyState"],"mappings":"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","sourcesContent":["const Heart = {\n    runHeart(id_canvas) {\n        window.requestAnimationFrame =\n            window.__requestAnimationFrame ||\n            window.requestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            window.mozRequestAnimationFrame ||\n            window.oRequestAnimationFrame ||\n            window.msRequestAnimationFrame ||\n            (function () {\n                return function (callback, element) {\n                    var lastTime = element.__lastTime;\n                    if (lastTime === undefined) {\n                        lastTime = 0;\n                    }\n                    var currTime = Date.now();\n                    var timeToCall = Math.max(1, 33 - (currTime - lastTime));\n                    window.setTimeout(callback, timeToCall);\n                    element.__lastTime = currTime + timeToCall;\n                };\n            })();\n        window.isDevice = (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(((navigator.userAgent || navigator.vendor || window.opera)).toLowerCase()));\n        var loaded = false;\n        var init = function () {\n            if (loaded) return;\n            loaded = true;\n            var mobile = window.isDevice;\n            // хотфикс ебать\n            var koef = mobile ? 0.95 : 1; \n            var canvas = document.getElementById(id_canvas);\n            var ctx = canvas.getContext('2d');\n            var width = canvas.width = koef * innerWidth;\n            var height = canvas.height = koef * innerHeight;\n            var rand = Math.random;\n            ctx.fillStyle = \"rgba(0,0,0,1)\";\n            ctx.fillRect(0, 0, width, height);\n            console.log(width + \" - \" + height);\n\n            var heartPosition = function (rad) {\n                // return [Math.sin(rad), Math.cos(rad)];\n                return [Math.pow(Math.sin(rad), 3), -(15 * Math.cos(rad) - 5 * Math.cos(2 * rad) - 2 * Math.cos(3 * rad) - Math.cos(4 * rad))];\n            };\n            var scaleAndTranslate = function (pos, sx, sy, dx, dy) {\n                return [dx + pos[0] * sx, dy + pos[1] * sy];\n            };\n\n            window.addEventListener('resize', function () {\n                width = canvas.width = koef * innerWidth;\n                height = canvas.height = koef * innerHeight;\n                ctx.fillStyle = \"rgba(0,0,0,1)\";\n                ctx.fillRect(0, 0, width, height);\n            });\n\n            var traceCount = mobile ? 20 : 50;\n\n            var pointsOrigin = [];\n            var i;\n            var dr = mobile ? 0.3 : 0.1;\n\n            for (i = 0; i < Math.PI * 2; i += dr) pointsOrigin.push(scaleAndTranslate(heartPosition(i), 210, 13, 0, 0));\n            for (i = 0; i < Math.PI * 2; i += dr) pointsOrigin.push(scaleAndTranslate(heartPosition(i), 150, 9, 0, 0));\n            for (i = 0; i < Math.PI * 2; i += dr) pointsOrigin.push(scaleAndTranslate(heartPosition(i), 90, 5, 0, 0));\n            var heartPointsCount = pointsOrigin.length;\n            \n            var targetPoints = [];\n            var pulse = function (kx, ky) {\n                for (i = 0; i < pointsOrigin.length; i++) {\n                    targetPoints[i] = [];\n                    targetPoints[i][0] = kx * pointsOrigin[i][0] + width / 2;\n                    targetPoints[i][1] = ky * pointsOrigin[i][1] + height / 2;\n                }\n            };\n\n            var e = [];\n            for (i = 0; i < heartPointsCount; i++) {\n                var x = rand() * width;\n                var y = rand() * height;\n                e[i] = {\n                    vx: 0,\n                    vy: 0,\n                    R: 2,\n                    speed: rand() + 5,\n                    q: ~~(rand() * heartPointsCount),\n                    D: 2 * (i % 2) - 1,\n                    force: 0.2 * rand() + 0.7,\n                    f: \"hsla(0,\" + ~~(40 * rand() + 60) + \"%,\" + ~~(60 * rand() + 20) + \"%,.3)\",\n                    trace: []\n                };\n                for (var k = 0; k < traceCount; k++) e[i].trace[k] = {\n                    x: x,\n                    y: y\n                };\n            }\n\n            var config = {\n                traceK: 0.4,\n                timeDelta: 0.01\n            };\n\n            var time = 0;\n            var loop = function () {\n                var n = -Math.cos(time);\n                pulse((1 + n) * .5, (1 + n) * .5);\n                time += ((Math.sin(time)) < 0 ? 9 : (n > 0.8) ? .2 : 1) * config.timeDelta;\n                ctx.fillStyle = \"rgba(0,0,0,.1)\";\n                ctx.fillRect(0, 0, width, height);\n                for (i = e.length; i--;) {\n                    var u = e[i];\n                    var q = targetPoints[u.q];\n                    var dx = u.trace[0].x - q[0];\n                    var dy = u.trace[0].y - q[1];\n                    var length = Math.sqrt(dx * dx + dy * dy);\n                    if (10 > length) {\n                        if (0.95 < rand()) {\n                            u.q = ~~(rand() * heartPointsCount);\n                        } else {\n                            if (0.99 < rand()) {\n                                u.D *= -1;\n                            }\n                            u.q += u.D;\n                            u.q %= heartPointsCount;\n                            if (0 > u.q) {\n                                u.q += heartPointsCount;\n                            }\n                        }\n                    }\n                    u.vx += -dx / length * u.speed;\n                    u.vy += -dy / length * u.speed;\n                    u.trace[0].x += u.vx;\n                    u.trace[0].y += u.vy;\n                    u.vx *= u.force;\n                    u.vy *= u.force;\n                    for (k = 0; k < u.trace.length - 1;) {\n                        var T = u.trace[k];\n                        var N = u.trace[++k];\n                        N.x -= config.traceK * (N.x - T.x);\n                        N.y -= config.traceK * (N.y - T.y);\n                    }\n                    ctx.fillStyle = u.f;\n\n                    for (k = 0; k < u.trace.length; k++) {\n                        ctx.fillRect(u.trace[k].x, u.trace[k].y, 1, 1);\n                    }\n                }\n                // ctx.fillStyle = \"rgba(255,255,255,1)\";\n                // for (i = u.trace.length; i--;) ctx.fillRect(targetPoints[i][0], targetPoints[i][1], 2, 2);\n\n                window.requestAnimationFrame(loop, canvas);\n            };\n            loop();\n        };\n\n        var s = document.readyState;\n        if (s === 'complete' || s === 'loaded' || s === 'interactive') init();\n        else document.addEventListener('DOMContentLoaded', init, false);\n    }\n}\nexport default Heart\n"]}]}